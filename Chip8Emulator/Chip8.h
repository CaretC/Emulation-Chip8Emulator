#pragma once
#include<iostream>

#include"Chip8_Registers.h"
#include"Chip8_Memory.h"
#include"Chip8_Stack.h"
#include"Chip8_Keyboard.h"
#include"Chip8_Screen.h"

class Chip8
{
	public:
		Chip8_Registers registers;
		Chip8_Memory memory;
		Chip8_Stack stack;
		Chip8_Keyboard keyboard;
		Chip8_Screen screen;

		void Initialize();
		void Execute(unsigned short opcode);

	private:
		unsigned char defaultCharacterSet[16 * 5] = {
        0xF0, 0x90, 0x90, 0x90, 0xF0, // "0"
		0x20, 0x60, 0x20, 0x20, 0x70, // "1"
        0xF0, 0x10, 0xF0, 0x80, 0xF0, // "2"
		0xF0, 0x10, 0xF0, 0x10, 0xF0, // "3"
		0x90, 0x90, 0xF0, 0x10, 0x10, // "4"
		0xF0, 0x80, 0xF0, 0x10, 0xF0, // "5"
		0xF0, 0x80, 0xF0, 0x90, 0xF0, // "6"
		0xF0, 0x10, 0x20, 0x40, 0x40, // "7"
		0xF0, 0x90, 0xF0, 0x90, 0xF0, // "8"
		0xF0, 0x90, 0xF0, 0x10, 0xF0, // "9"
		0xF0, 0x90, 0xF0, 0x90, 0x90, // "A"
		0xE0, 0x90, 0xE0, 0x90, 0xE0, // "B"
		0xF0, 0x80, 0x80, 0x80, 0xF0, // "C"
		0xE0, 0x90, 0x90, 0x90, 0xE0, // "D"
		0xF0, 0x80, 0xF0, 0x80, 0xF0, // "E"
		0xF0, 0x80, 0xF0, 0x80, 0x80  // "F"
		};

		void loadDefaultCharacterSet();

		void executeExtended(unsigned short opcode);

		void exectue0x8000(unsigned short opcode, unsigned char x, unsigned char y);
};

